<div class="pfs-chronicle-generator-form">
    <input type="hidden" name="char" value="{{char}}">
    <input type="hidden" name="societyid" value="{{societyid}}">
    <input type="hidden" name="level" value="{{level}}">
    <input type="hidden" name="gmid" value="{{gmid}}">
    <input type="hidden" name="event" value="{{event}}">
    <input type="hidden" name="eventcode" value="{{eventcode}}">
    <input type="hidden" name="treasure_bundles_gp" value="{{treasure_bundles_gp}}">
    <input type="hidden" name="gp_gained" value="{{gp_gained}}">

    <div class="top-section">
        <fieldset class="character-details">
            <legend>Character Details</legend>
            <div class="form-group">
                <strong>Character Name:</strong>
                <span>{{char}}</span>
            </div>
            <div class="form-group">
                <strong>Society ID:</strong>
                <span>{{societyid}}</span>
            </div>
            <div class="form-group">
                <strong>Level:</strong>
                <span>{{level}}</span>
            </div>
        </fieldset>

        <fieldset class="event-details">
            <legend>Event Details</legend>
            <div class="form-group">
                <strong>GM PFS Number:</strong>
                <span>{{gmid}}</span>
            </div>
            <div class="form-group">
                <strong>Event:</strong>
                <span>{{event}} - {{eventcode}}</span>
            </div>
            <div class="form-group">
                <label for="date">Event Date</label>
                <input type="date" id="date" name="date" value="{{date}}">
            </div>
            <div class="form-group">
                <button type="button" id="view-blank-chronicle" data-path="{{blankChroniclePath}}">
                    <i class="fas fa-file-pdf"></i> {{chronicleFileName}}
                </button>
            </div>
        </fieldset>
    </div>

    <div class="rewards-section">
        <fieldset class="rewards">
            <legend>Rewards</legend>
            <div class="form-group">
                <label for="xp_gained">XP Earned</label>
                <input type="number" id="xp_gained" name="xp_gained" value="{{xp_gained}}">
            </div>
            <div class="form-group">
                <label for="treasureBundles">Treasure Bundles</label>
                <input type="number" id="treasureBundles" name="treasureBundles" value="{{treasureBundles}}">
            </div>
            <div class="form-group">
                <label for="income_earned">Income Earned</label>
                <input type="number" id="income_earned" name="income_earned" value="{{income_earned}}" step="0.01">
            </div>
            <div class="form-group">
                <strong>Gold Earned:</strong>
                <span id="gp_gained_display">{{gp_gained}}</span>
            </div>
            <div class="form-group">
                <label for="gp_spent">Gold Spent</label>
                <input type="number" id="gp_spent" name="gp_spent" value="{{gp_spent}}" step="0.01">
            </div>
        </fieldset>

        <fieldset class="notes-reputation">
            <legend>Notes & Reputation</legend>
            <div class="form-group">
                <label for="notes">Notes</label>
                <textarea id="notes" name="notes" rows="12" cols="40">{{notes}}</textarea>
            </div>
            <div class="form-group">
                <label for="reputation">Reputation</label>
                <textarea id="reputation" name="reputation" rows="3" cols="40">{{reputation}}</textarea>
            </div>
        </fieldset>
    </div>

    {{#if checkboxChoices}}
    <div class="selections-container">
        <fieldset class="checkbox-items">
            <legend>Adventure Summary Checkboxes</legend>
            <div class="form-group checkbox-choices">
            {{#each checkboxChoices}}
                <div class="checkbox-choice">
                    <input type="checkbox" id="checkboxItems.{{@index}}" name="summary_checkbox" value="{{this}}" {{#if (lookup ../selectedCheckboxes this)}}checked{{/if}}>
                    <label for="checkboxItems.{{@index}}">{{this}}</label>
                </div>
            {{/each}}
            </div>
        </fieldset>

        {{#if strikeoutChoices}}
        <fieldset class="strikeout-items">
            <legend>Items to Strike Out</legend>
            <div class="form-group strikeout-choices">
            {{#each strikeoutChoices}}
                <div class="item-choice">
                    <input type="checkbox" id="strikeoutItems.{{@index}}" name="strikeout_item_lines" value="{{this}}" {{#if (lookup ../selectedStrikeouts this)}}checked{{/if}}>
                    <label for="strikeoutItems.{{@index}}">{{this}}</label>
                </div>
            {{/each}}
            </div>
        </fieldset>
        {{/if}}
    </div>
    {{else}}
        {{#if strikeoutChoices}}
        <fieldset class="strikeout-items">
            <legend>Items to Strike Out</legend>
            <div class="form-group strikeout-choices">
            {{#each strikeoutChoices}}
                <div class="item-choice">
                    <input type="checkbox" id="strikeoutItems.{{@index}}" name="strikeout_item_lines" value="{{this}}" {{#if (lookup ../selectedStrikeouts this)}}checked{{/if}}>
                    <label for="strikeoutItems.{{@index}}">{{this}}</label>
                </div>
            {{/each}}
            </div>
        </fieldset>
        {{/if}}
    {{/if}}
</div>
